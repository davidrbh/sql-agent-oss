tables:
- name: admin
  friendly_name: Administradores del Sistema
  description: Tabla que almacena los usuarios administrativos de la plataforma Lysto
    con acceso al panel de control. Incluye roles jerárquicos (a1, a2, a3) para gestionar
    permisos en los modelos BNPL y Pasarela de Pagos. Maneja autenticación, estado
    de cuenta y soft-delete para auditoría.
  columns:
  - name: id
    description: Identificador único incremental (PK) del administrador
    is_active: true
  - name: uuid
    description: Identificador único universal (UUIDv4) para referencias externas
      seguras
    is_active: true
  - name: name
    description: Nombre(s) del administrador
    is_active: true
  - name: lastname
    description: Apellido(s) del administrador
    is_active: true
  - name: email
    description: Correo electrónico único para autenticación y comunicación
    is_active: true
  - name: password
    description: Hash de contraseña (bcrypt) para autenticación segura
    is_active: true
  - name: role
    description: 'Rol jerárquico: a1 (superadmin), a2 (admin operativo), a3 (admin
      limitado). Define permisos en módulos BNPL y pagos'
    is_active: true
  - name: status
    description: 'Estado de la cuenta: 1=activo, 0=inactivo (bloqueado temporalmente)'
    is_active: true
  - name: contact_info
    description: Información de contacto adicional (teléfono, dirección) en formato
      JSON/texto
    is_active: true
  - name: thumbnail
    description: Ruta o URL de la foto de perfil del administrador
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro (timestamp)
    is_active: true
  - name: updated_at
    description: Fecha y hora de última actualización del registro (timestamp)
    is_active: true
  - name: deleted_at
    description: Timestamp de eliminación suave (soft-delete). 'None' indica registro
      activo
    is_active: true
- name: api_client_auth
  friendly_name: Autenticación de Clientes API
  description: Tabla maestra para la gestión de credenciales y autenticación de clientes
    externos (aplicaciones, socios comerciales) que consumen las APIs de Lysto. Almacena
    las claves de acceso, estado de la cuenta y registro de actividad para los modelos
    BNPL y Pasarela de Pagos. Es fundamental para la seguridad y control de acceso
    a los servicios financieros.
  columns:
  - name: id
    description: Identificador único incremental (clave primaria) de registro en la
      tabla.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID v4) utilizado como referencia
      pública y segura para el cliente en APIs y sistemas externos, en lugar de exponer
      el ID interno.
    is_active: true
  - name: client
    description: 'Nombre o identificador único del cliente (ej: ''lysto_app'', ''socio_comercial_x'').
      Representa la aplicación o entidad que consume la API.'
    is_active: true
  - name: password
    description: 'Hash seguro (ej: bcrypt) de la contraseña o clave secreta del cliente,
      utilizado para autenticación en las solicitudes API.'
    is_active: true
  - name: status
    description: 'Estado operativo del cliente. Valores típicos: 1 (Activo), 0 (Inactivo).
      Controla si el cliente puede autenticarse y realizar transacciones.'
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) que registra la fecha y hora de creación
      del cliente en el sistema.
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) que registra la última actualización
      de cualquier campo del registro del cliente.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo (datetime) que implementa 'soft delete'. Si es NULL,
      el registro está activo; si tiene una fecha, indica cuándo fue eliminado lógicamente.
    is_active: true
  - name: last_login_at
    description: Marca de tiempo (timestamp) que registra la última autenticación
      exitosa de este cliente. Útil para auditoría y monitoreo de actividad.
    is_active: true
- name: api_clients
  friendly_name: Clientes de API
  description: Tabla que almacena los clientes autorizados para consumir las APIs
    de Lysto. Cada registro representa una aplicación o servicio externo (como 'Lysto-app')
    que puede realizar operaciones en los sistemas de BNPL (Buy Now Pay Later) y Pasarela
    de Pagos. Contiene las credenciales de autenticación (API Key y hash del secreto)
    y controla el estado activo/inactivo del acceso.
  columns:
  - name: id
    description: Identificador único incremental (clave primaria) del cliente de API.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID v4) del cliente, utilizado como
      referencia segura en sistemas distribuidos y APIs públicas.
    is_active: true
  - name: client_name
    description: 'Nombre descriptivo de la aplicación o servicio cliente (ej: ''Lysto-app'').'
    is_active: true
  - name: api_key
    description: Llave pública de la API (generalmente un hash MD5 o similar) que
      identifica al cliente en las solicitudes. Se envía en los headers de las peticiones
      HTTP.
    is_active: true
  - name: api_secret_hash
    description: Hash (generalmente bcrypt) del secreto privado de la API. Se utiliza
      para firmar solicitudes o en flujos de autenticación más seguros. NUNCA se almacena
      en texto plano.
    is_active: true
  - name: is_active
    description: Bandera que indica si el cliente tiene acceso activo a las APIs (1
      = Activo, 0 = Inactivo). Permite revocar acceso sin eliminar el registro.
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro del cliente de API.
    is_active: true
  - name: updated_at
    description: 'Fecha y hora de la última actualización del registro (ej: al rotar
      credenciales o cambiar el estado).'
    is_active: true
- name: auth_state
  friendly_name: Estado de Autenticación de Usuarios
  description: Tabla que almacena los tokens de autenticación JWT (access y refresh)
    para los usuarios de Lysto. Gestiona el estado de sesión activa, controla la validez
    temporal de los tokens y permite el mecanismo de refresh para mantener sesiones
    seguras en los modelos BNPL y Pasarela de Pagos. Los tokens están vinculados a
    usuarios específicos mediante users_id.
  columns:
  - name: id
    description: Identificador único autoincremental de la tabla. Clave primaria.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID v4) para este registro de estado
      de autenticación. Se utiliza como referencia externa.
    is_active: true
  - name: users_id
    description: UUID del usuario al que pertenece este estado de autenticación. Relación
      con la tabla de usuarios.
    is_active: true
  - name: token
    description: Token de acceso JWT (JSON Web Token) firmado. Se utiliza para autorizar
      solicitudes a la API de Lysto.
    is_active: true
  - name: refresh
    description: Token de refresco JWT. Se utiliza para obtener un nuevo token de
      acceso cuando el actual expira, sin requerir credenciales nuevamente.
    is_active: true
  - name: is_alive
    description: Indicador booleano (0/1) que señala si la sesión está activa (1)
      o ha sido cerrada/revocada (0).
    is_active: true
  - name: token_valid_until
    description: Timestamp Unix (en segundos) que indica la fecha y hora de expiración
      del token de acceso (campo 'token').
    is_active: true
  - name: refresh_valid_until
    description: Timestamp Unix (en segundos) que indica la fecha y hora de expiración
      del token de refresco (campo 'refresh'). Suele tener una validez mayor que el
      token de acceso.
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) en formato 'YYYY-MM-DD HH:MM:SS' que
      registra cuándo se creó este estado de autenticación (login exitoso).
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) en formato 'YYYY-MM-DD HH:MM:SS' que
      registra la última actualización del registro (ej. refresh del token).
    is_active: true
  - name: deleted_at
    description: Timestamp Unix (en segundos) que implementa un soft delete. Indica
      cuándo se 'eliminó' lógicamente el registro (logout o expiración). Valor 'None'
      o NULL significa que el registro está activo.
    is_active: true
- name: bcv_rate_history
  friendly_name: Historial de Tasas BCV
  description: Tabla que almacena el historial de tasas de cambio oficiales del Banco
    Central de Venezuela (BCV). Es fundamental para las operaciones de Lysto, ya que
    permite convertir montos entre VES y USD en los modelos de BNPL y Pasarela de
    Pagos, asegurando que los cálculos financieros, intereses y reembolsos se realicen
    con la tasa oficial vigente en la fecha de cada transacción. La tabla registra
    múltiples actualizaciones diarias de la tasa, capturando su volatilidad.
  columns:
  - name: id
    description: Identificador único y autoincremental de cada registro en el historial.
    is_active: true
  - name: rate
    description: Valor de la tasa de cambio oficial BCV (VES/USD) registrada. Es el
      dato crítico para todas las conversiones monetarias en la plataforma.
    is_active: true
  - name: date
    description: Fecha a la que aplica la tasa, en formato 'DD/MM/YYYY'. Representa
      el día calendario, no el momento exacto de la consulta.
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) que indica el momento exacto en que se
      insertó el registro en la base de datos.
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) que indica la última vez que se modificó
      el registro. En un historial de tasas, normalmente coincide con `created_at`
      a menos que se corrija un error.
    is_active: true
  - name: deleted_at
    description: Campo para borrado lógico (soft delete). Si es 'None' o NULL, el
      registro está activo. Si contiene una marca de tiempo, indica cuándo se marcó
      como eliminado, permitiendo la recuperación de datos sin perder el historial
      de tasas, crucial para auditoría.
    is_active: true
