tables:
- name: users
  friendly_name: Usuarios
  description: Tabla maestra de usuarios del sistema. Contiene la información de registro,
    estado, límites de crédito y deuda actual de cada usuario. Es la fuente principal
    para análisis de clientes, riesgo crediticio y estado de cuentas.
  columns:
  - name: id
    description: Identificador único interno del usuario.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del usuario.
    is_active: true
  - name: email
    description: Dirección de correo electrónico del usuario. Dimensión principal
      para identificación y contacto.
    is_active: true
  - name: status
    description: 'Estado de la cuenta del usuario. Valores permitidos: 1=Activo, 0=Inactivo.'
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro del usuario. Dimensión temporal
      para análisis de crecimiento.
    is_active: true
  - name: balance
    description: FUENTE DE VERDAD para la deuda. Representa la deuda total pendiente
      del usuario. Un valor POSITIVO significa que el usuario DEBE dinero. NO calcular
      sumando otras transacciones; usar siempre este valor directamente.
    is_active: true
  - name: credit_limit
    description: Límite de crédito asignado al usuario. Medida clave para análisis
      de riesgo y capacidad de compra.
    is_active: true
  - name: current_debt
    description: 'COLUMNA VIRTUAL (Medida Semántica). Representa la deuda total pendiente.
      Se deriva directamente de la columna ''balance'', que es la FUENTE DE VERDAD.
      Un valor positivo indica deuda. Fórmula: current_debt = balance.'
    is_active: true
  - name: fullname
    description: Nombre completo del usuario (nombre + apellido).
    is_active: true
  - name: doc
    description: Documento de identificación del usuario.
    is_active: true
  - name: nationality
    description: 'Nacionalidad del usuario (ej: ''V'' para Venezolano).'
    is_active: true
  - name: level
    description: Nivel o categoría asignada al usuario en el sistema.
    is_active: true
  - name: origin_credit_limit
    description: Límite de crédito original asignado al momento del registro o aprobación.
    is_active: true
  - name: is_mail_confirmed
    description: Indica si el correo electrónico del usuario ha sido confirmado (1=Sí,
      0=No).
    is_active: true
  - name: is_phone_confirmed
    description: Indica si el teléfono del usuario ha sido confirmado (1=Sí, 0=No).
    is_active: true
  - name: birth
    description: Fecha de nacimiento del usuario.
    is_active: true
  - name: sex
    description: 'Género del usuario (ej: ''hombre'', ''mujer'').'
    is_active: true
  - name: updated_at
    description: Fecha y hora de la última actualización del registro.
    is_active: true
  - name: name
    description: Nombre(s) del usuario.
    is_active: true
  - name: lastname
    description: Apellido(s) del usuario.
    is_active: true
  - name: manual_registration
    description: Indica si el registro fue manual (1) o automático (0).
    is_active: true
  - name: merchant_level
    description: Nivel del usuario como comerciante (si aplica).
    is_active: true
  - name: Credit_Auth
    description: Autorización de crédito (puede ser 'None' si no aplica).
    is_active: true
  - name: amount_favor_usd
    description: Monto a favor del usuario en dólares.
    is_active: true
  - name: amount_favor_bs
    description: Monto a favor del usuario en bolívares.
    is_active: true
  - name: tab
    description: Pestaña o sección asociada al usuario en la interfaz.
    is_active: true
  - name: subscription_complete
    description: Indica si el proceso de suscripción está completo (1=Sí, 0=No).
    is_active: true
  - name: ref_id
    description: Identificador de referencia (puede ser 'None').
    is_active: true
  - name: ref_by
    description: Usuario que refirió a este usuario (puede ser 'None').
    is_active: true
  - name: created_on_time
    description: Marca de tiempo de creación específica (puede ser 'None').
    is_active: true
  - name: sms
    description: Preferencia de notificación por SMS (1=Activado, 0=Desactivado).
    is_active: true
  - name: ref_made
    description: Indica si el usuario ha realizado referidos (1=Sí, 0=No).
    is_active: true
  - name: mail
    description: Preferencia de notificación por correo (1=Activado, 0=Desactivado).
    is_active: true
  - name: push
    description: Preferencia de notificaciones push (1=Activado, 0=Desactivado).
    is_active: true
  - name: push_token
    description: Token para notificaciones push (puede ser 'None').
    is_active: true
  - name: is_merchant_related
    description: Indica si el usuario está relacionado con un comercio (1=Sí, 0=No).
    is_active: true
  - name: merchant_id
    description: ID del comercio asociado (si aplica, puede ser 'None').
    is_active: true
  - name: doc_photo
    description: Ruta o referencia a la foto del documento (puede ser 'None').
    is_active: true
  - name: selfie_photo
    description: Ruta o referencia a la selfie del usuario (puede ser 'None').
    is_active: true
  - name: ref_links
    description: Número o lista de enlaces de referencia generados.
    is_active: true
  - name: deleted_at
    description: Fecha y hora de eliminación (soft delete). 'None' indica que no está
      eliminado.
    is_active: true
  - name: password
    description: Hash de la contraseña del usuario (solo para contexto, no para análisis).
    is_active: true
- name: users_profile
  friendly_name: Perfil de Usuarios
  description: Tabla maestra que contiene la información de perfil de los usuarios
    del sistema. Esta tabla es la FUENTE DE VERDAD para los datos personales de contacto
    e identificación de los usuarios. Incluye nombre, apellido, teléfono y documento
    de identidad.
  columns:
  - name: id
    description: Identificador único interno (clave primaria) del registro del perfil.
      Es un número secuencial generado por la base de datos.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del registro del perfil. Se
      utiliza para referencias externas y APIs.
    is_active: true
  - name: users_id
    description: Clave foránea que referencia al usuario principal en el sistema (tabla
      'users'). Relaciona el perfil con la cuenta de usuario.
    is_active: true
  - name: name
    description: 'Nombre(s) del usuario. REGLA DE NEGOCIO: Este campo es la FUENTE
      DE VERDAD para el nombre del usuario en el sistema. Los datos se almacenan en
      mayúsculas.'
    is_active: true
  - name: lastname
    description: 'Apellido(s) del usuario. REGLA DE NEGOCIO: Este campo es la FUENTE
      DE VERDAD para el apellido del usuario en el sistema. Los datos se almacenan
      en mayúsculas.'
    is_active: true
  - name: phone
    description: 'Número de teléfono móvil del usuario. REGLA DE NEGOCIO: Este campo
      es la FUENTE DE VERDAD para el teléfono de contacto principal. El formato esperado
      es un número de teléfono venezolano que comienza con ''0412'', ''0414'', ''0424'',
      etc.'
    is_active: true
  - name: document
    description: 'Número de documento de identidad del usuario. REGLA DE NEGOCIO:
      Este campo es la FUENTE DE VERDAD para la identificación oficial del usuario.
      El formato observado es el de cédula de identidad venezolana con puntos separadores
      (ej: ''18.813.275'').'
    is_active: true
  - name: address_1
    description: 'Línea principal de la dirección del usuario (ej: calle, avenida,
      urbanización).'
    is_active: true
  - name: address_2
    description: 'Línea secundaria de la dirección del usuario (ej: edificio, piso,
      apartamento, referencia).'
    is_active: true
  - name: zip
    description: Código postal de la dirección del usuario.
    is_active: true
  - name: city
    description: Ciudad de residencia del usuario.
    is_active: true
  - name: state
    description: Estado o provincia de residencia del usuario.
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) que indica la fecha y hora exacta en
      UTC en la que se creó el registro del perfil.
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) que indica la última fecha y hora en
      UTC en la que se actualizó el registro del perfil. Valor 'None' indica que nunca
      ha sido modificado.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo (timestamp) que indica la fecha y hora en UTC en
      la que se realizó un borrado lógico (soft delete) del registro. Valor 'None'
      indica que el registro está activo y no ha sido eliminado.
    is_active: true
  - name: full_name
    description: 'COLUMNA VIRTUAL (SQL): Nombre completo del usuario. Se genera concatenando
      ''name'' y ''lastname'' con un espacio. Fórmula: `name || '' '' || lastname`.
      REGLA DE NEGOCIO: Esta es la representación canónica del nombre del usuario
      para mostrar en interfaces.'
    is_active: true
  - name: document_clean
    description: 'COLUMNA VIRTUAL (SQL): Número de documento sin puntos ni caracteres
      especiales. Fórmula: `REPLACE(document, ''.'', '''')`. Útil para búsquedas y
      comparaciones.'
    is_active: true
  - name: is_active_profile
    description: 'COLUMNA VIRTUAL (SQL): Indicador booleano que muestra si el perfil
      está activo (no eliminado lógicamente). Fórmula: `deleted_at IS NULL`. VALORES:
      TRUE=Perfil Activo, FALSE=Perfil Eliminado.'
    is_active: true
- name: users_score
  friendly_name: Puntaje de Crédito de Usuarios
  description: Tabla que almacena el puntaje de crédito interno (score) asignado a
    cada usuario del sistema. Contiene el valor numérico del score junto con metadatos
    sobre su estado, tipo de usuario (B2B/B2C) y fechas de creación/actualización.
    Esta tabla es la FUENTE DE VERDAD para el puntaje de crédito de los usuarios.
  columns:
  - name: id
    description: Identificador único numérico de la fila en la tabla (clave primaria).
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del registro del score.
    is_active: true
  - name: users_id
    description: Clave foránea que referencia al usuario (UUID) al que pertenece este
      puntaje. Relación con la tabla de usuarios.
    is_active: true
  - name: score
    description: Puntaje de crédito interno del usuario. Valor numérico que representa
      la evaluación crediticia. Esta columna es la FUENTE DE VERDAD para el score
      del usuario. En la muestra de datos se observan valores '0', lo que podría indicar
      un score inicial o pendiente de cálculo.
    is_active: true
  - name: status
    description: 'Estado del registro del score. Valores permitidos (según muestra
      de datos): 1=Activo.'
    is_active: true
  - name: is_b2b
    description: 'Indica si el score pertenece a un usuario de tipo Business-to-Business
      (B2B) o Business-to-Consumer (B2C). Valores permitidos (según muestra de datos):
      0=B2C (No es B2B), 1=B2B.'
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) que indica cuándo se creó el registro
      del score para el usuario.
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) que indica la última actualización del
      registro. En la muestra aparece como 'None', lo que sugiere que aún no ha sido
      modificado desde su creación.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo (timestamp) que indica cuándo se eliminó (soft delete)
      el registro. Un valor 'None' o NULL significa que el registro está activo y
      no ha sido eliminado.
    is_active: true
- name: credit_evaluations
  friendly_name: Evaluaciones de Crédito
  description: Tabla que almacena los resultados de las evaluaciones de crédito para
    usuarios. Contiene el límite de crédito final asignado, el resultado detallado
    de la evaluación en formato JSON, y metadatos de creación. La métrica principal
    'limit_granted' se deriva directamente del límite final aprobado.
  columns:
  - name: id
    description: Identificador único de la evaluación de crédito.
    is_active: true
  - name: user_id
    description: Identificador del usuario evaluado. Relación con la tabla de usuarios.
    is_active: true
  - name: evaluation_result
    description: 'Resultado detallado de la evaluación en formato JSON. Contiene:
      status (booleano de aprobación), nivel_de_credito (objeto con id, descripción,
      código, unidad, rango min/max, valor y monto_inicial), total (puntuación total
      de la evaluación), monto_desacelerado (monto ajustado por factores de riesgo),
      y detalles (desglose de puntuaciones por categoría: sexo, edad, nacionalidad,
      teléfono, hora, ubicación).'
    is_active: true
  - name: final_credit_limit
    description: Límite de crédito final aprobado para el usuario en USD. Es la FUENTE
      DE VERDAD para la medida 'limit_granted'. Valor numérico con dos decimales.
    is_active: true
  - name: created_at
    description: Fecha y hora en que se realizó y registró la evaluación de crédito.
    is_active: true
  - name: limit_granted
    description: 'MEDIDA PRINCIPAL: Representa el monto de crédito otorgado. Se calcula
      directamente a partir de la columna ''final_credit_limit''. FÓRMULA: limit_granted
      = final_credit_limit.'
    is_active: true
  - name: evaluation_status
    description: 'Dimensión virtual que extrae el estado de aprobación del campo JSON
      ''evaluation_result''. VALORES PERMITIDOS: true=Aprobado, false=Rechazado.'
    is_active: true
  - name: credit_level
    description: 'Dimensión virtual que extrae el nivel de crédito asignado del campo
      JSON ''evaluation_result''. Ejemplos de valores observados: ''Nivel 3'' (monto_inicial:
      168 USD), ''Nivel 2'' (monto_inicial: 184 USD).'
    is_active: true
  - name: evaluation_score
    description: 'Dimensión virtual que extrae la puntuación total de la evaluación
      del campo JSON ''evaluation_result''. Valor numérico entre 0 y 1 (ej: 0.70,
      0.60).'
    is_active: true
- name: merchant
  friendly_name: Comercios (Merchants)
  description: Tabla maestra de comercios afiliados al sistema BNPL (Buy Now Pay Later).
    Contiene la información comercial, las reglas de financiamiento específicas de
    cada comercio (monto mínimo, porcentajes de inicial, cuotas permitidas) y su tarifa
    mensual. Esta tabla es la FUENTE DE VERDAD para las configuraciones de financiamiento
    por comercio.
  columns:
  - name: id
    description: Identificador único numérico del comercio (clave primaria).
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del comercio, utilizado para
      referencias externas o APIs.
    is_active: true
  - name: listed
    description: 'Indica si el comercio está listado y visible en el catálogo público.
      Valores permitidos: 1=Listado/Visible, 0=No listado/Oculto.'
    is_active: true
  - name: status
    description: 'Estado operativo del comercio en el sistema. Valores permitidos:
      1=Activo, 0=Inactivo.'
    is_active: true
  - name: name
    description: 'Nombre legal o razón social del comercio (Dimensión de Negocio:
      ''name'').'
    is_active: true
  - name: trade_name
    description: 'Nombre comercial o marca bajo la cual opera el negocio (Dimensión
      de Negocio: ''trade_name'').'
    is_active: true
  - name: logo
    description: URL del logotipo del comercio.
    is_active: true
  - name: rif
    description: Registro de Información Fiscal (RIF) del comercio.
    is_active: true
  - name: monthly_fee
    description: Tarifa mensual que el comercio paga por el servicio. Esta es una
      MEDIDA clave del negocio. Representa un porcentaje. FUENTE DE VERDAD para el
      cálculo de comisiones.
    is_active: true
  - name: description
    description: Descripción breve de la actividad o giro del comercio.
    is_active: true
  - name: policies
    description: 'Políticas específicas del comercio (ej: cambios, devoluciones).'
    is_active: true
  - name: montoMinimo
    description: 'Dimensión de Negocio: ''montoMinimo''. Monto mínimo de venta (en
      la moneda base) requerido para que una transacción sea elegible para financiamiento.
      Regla: Transacciones por debajo de este monto no pueden ser financiadas.'
    is_active: true
  - name: porcentajesInicial
    description: 'Dimensión de Negocio: ''porcentajesInicial''. JSON que contiene
      los porcentajes de pago inicial permitidos para financiar una compra. Regla:
      El cliente debe elegir uno de estos porcentajes al momento de la financiación.
      Ejemplo de valores en datos reales: ["40"], ["5"], ["60","40"].'
    is_active: true
  - name: cuotasPermitidas
    description: 'Dimensión de Negocio: ''cuotasPermitidas''. JSON que contiene los
      plazos (en número de cuotas) permitidos para el financiamiento. Regla: El cliente
      debe elegir uno de estos plazos. Ejemplo de valores en datos reales: ["3"],
      ["1","2"].'
    is_active: true
  - name: created_at
    description: Marca de tiempo de creación del registro del comercio en el sistema.
    is_active: true
  - name: updated_at
    description: Marca de tiempo de la última actualización del registro del comercio.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo de eliminación (soft delete). Valor 'None' indica
      que el registro no está eliminado.
    is_active: true
  - name: config_financiamiento_valida
    description: 'COLUMNA VIRTUAL (SQL). Evalúa si la configuración de financiamiento
      del comercio es válida y completa. Fórmula lógica: `montoMinimo` > 0 AND `porcentajesInicial`
      IS NOT NULL AND JSON_LENGTH(`porcentajesInicial`) > 0 AND `cuotasPermitidas`
      IS NOT NULL AND JSON_LENGTH(`cuotasPermitidas`) > 0.'
    is_active: true
- name: merchant_branches
  friendly_name: Sucursales de Comercios
  description: Tabla maestra que contiene todas las sucursales o puntos de venta asociados
    a los comercios registrados en el sistema. Incluye información de ubicación geográfica
    (estado, municipio, parroquia), datos de contacto y configuraciones operativas
    específicas de cada sucursal.
  columns:
  - name: id
    description: Identificador único numérico de la sucursal. Clave primaria de la
      tabla.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) de la sucursal. Utilizado para
      referencias externas y APIs.
    is_active: true
  - name: merchant_id
    description: ID del comercio al que pertenece esta sucursal. Relación con la tabla
      de comercios (merchants).
    is_active: true
  - name: name
    description: 'Nombre de la sucursal. DIMENSIÓN DEFINIDA POR NEGOCIO. Ejemplos
      de datos reales: ''test-1'', ''Fusfit'', ''Casa Pan''.'
    is_active: true
  - name: nickname
    description: Alias o correo electrónico asociado a la sucursal, comúnmente usado
      para identificarla en el sistema.
    is_active: true
  - name: is_main
    description: 'Indica si esta sucursal es la principal o matriz del comercio. REGLA
      DE NEGOCIO: 1=Sí (Principal), 0=No.'
    is_active: true
  - name: can_configure_quotes
    description: 'Indica si la sucursal tiene permisos para configurar cotizaciones.
      REGLA DE NEGOCIO: 1=Sí (Puede configurar), 0=No.'
    is_active: true
  - name: address_1
    description: Dirección física principal de la sucursal.
    is_active: true
  - name: estado
    description: 'Estado o región donde se encuentra la sucursal. DIMENSIÓN DEFINIDA
      POR NEGOCIO. Ejemplos de datos reales: ''Distrito Capital'', ''Miranda''. FUENTE
      DE VERDAD para la ubicación geográfica a nivel estatal.'
    is_active: true
  - name: municipio
    description: 'Municipio donde se encuentra la sucursal. Ejemplos: ''Libertador'',
      ''Baruta''.'
    is_active: true
  - name: parroquia
    description: 'Parroquia donde se encuentra la sucursal. Ejemplos: ''Candelaria'',
      ''Nuestra Señora del Rosario''.'
    is_active: true
  - name: whatsapp
    description: Número de teléfono para contacto vía WhatsApp de la sucursal.
    is_active: true
  - name: address
    description: Campo de dirección alternativo. Según los datos de muestra, actualmente
      no se utiliza (valor 'None').
    is_active: true
  - name: phone
    description: Número de teléfono fijo o principal de la sucursal.
    is_active: true
  - name: is_active
    description: 'Estado de actividad de la sucursal en el sistema. REGLA DE NEGOCIO:
      1=Activa, 0=Inactiva.'
    is_active: true
  - name: created_at
    description: Marca de tiempo (timestamp) que indica la fecha y hora de creación
      del registro.
    is_active: true
  - name: updated_at
    description: Marca de tiempo (timestamp) que indica la última fecha y hora de
      actualización del registro.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo (timestamp) que indica la fecha y hora de eliminación
      lógica (soft delete). Valor 'None' indica que el registro no está eliminado.
    is_active: true
  - name: full_address
    description: 'COLUMNA VIRTUAL (SQL). Dirección completa formateada concatenando
      address_1, municipio, estado. Ejemplo de SQL: CONCAT(address_1, '', '', municipio,
      '', '', estado)'
    is_active: true
  - name: status
    description: 'COLUMNA VIRTUAL (SQL). Estado legible derivado de `is_active` y
      `deleted_at`. REGLA DE NEGOCIO: Si `deleted_at` IS NOT NULL -> ''Eliminada''.
      Si `is_active` = 1 -> ''Activa'', si = 0 -> ''Inactiva''. Ejemplo de SQL: CASE
      WHEN deleted_at IS NOT NULL THEN ''Eliminada'' WHEN is_active = 1 THEN ''Activa''
      ELSE ''Inactiva'' END'
    is_active: true
- name: merchant_users
  friendly_name: Usuarios del Comercio
  description: Tabla maestra que contiene todos los usuarios registrados en el sistema
    de comercios. Incluye información de autenticación, datos personales, rol asignado
    y estado de la cuenta. Esta tabla es la FUENTE DE VERDAD para la gestión de acceso
    y permisos de usuarios dentro de la plataforma de comercios.
  columns:
  - name: id
    description: Identificador único numérico del usuario (clave primaria).
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del usuario para referencias
      externas y APIs.
    is_active: true
  - name: merchant_id
    description: UUID del comercio al que pertenece el usuario. Relación con la tabla
      de comercios.
    is_active: true
  - name: nickname
    description: 'Nombre de usuario o correo electrónico utilizado para iniciar sesión.
      REGLA DE NEGOCIO: Este campo se mapea semánticamente como ''username''.'
    is_active: true
  - name: password
    description: Hash de la contraseña del usuario (algoritmo bcrypt).
    is_active: true
  - name: name
    description: Nombre(s) del usuario.
    is_active: true
  - name: lastname
    description: Apellido(s) del usuario. Puede contener el valor 'None'.
    is_active: true
  - name: role
    description: 'Identificador (UUID) del rol asignado al usuario. REGLA DE NEGOCIO:
      Este campo define los permisos y acceso del usuario dentro del sistema. Valores
      observados en datos reales: ''e7d47c40-8f73-4af1-a994-0b8e7e3a4f53'', ''0541b9ec-0325-46f3-8db7-a9147c7f6d11''.
      Se debe cruzar con una tabla de roles para obtener el nombre descriptivo.'
    is_active: true
  - name: phone
    description: Número de teléfono del usuario. Puede incluir código de país.
    is_active: true
  - name: status
    description: 'Estado de la cuenta del usuario. REGLA DE NEGOCIO: 1=Activo, 0=Inactivo
      (inferido). Valor observado en datos reales: ''1''.'
    is_active: true
  - name: created_at
    description: Marca de tiempo de creación del registro del usuario.
    is_active: true
  - name: updated_at
    description: Marca de tiempo de la última actualización del registro del usuario.
    is_active: true
  - name: deleted_at
    description: Marca de tiempo de eliminación (soft delete). Contiene 'None' si
      el registro no está eliminado.
    is_active: true
  - name: full_name
    description: 'COLUMNA VIRTUAL: Nombre completo del usuario. FÓRMULA: CONCAT(name,
      '' '', lastname). Nota: Maneja el caso donde lastname es ''None''.'
    is_active: true
  - name: username
    description: 'COLUMNA VIRTUAL / ALIAS SEMÁNTICO: Nombre de usuario para el negocio.
      Se obtiene directamente del campo físico ''nickname''. REGLA DE NEGOCIO: Este
      es el campo que debe usarse en consultas y reportes cuando se requiera el ''username''
      del usuario.'
    is_active: true
- name: merchant_user_branches
  friendly_name: Asignación de Usuarios a Sucursales
  description: Tabla de asociación que vincula a los usuarios del sistema (merchant_users)
    con las sucursales (branches) a las que tienen acceso. Esta tabla define los permisos
    de acceso a nivel de sucursal para cada usuario, permitiendo controlar qué usuarios
    pueden operar en qué sucursales específicas. Es fundamental para la seguridad
    y segmentación de datos en sistemas multi-sucursal.
  columns:
  - name: id
    description: Identificador único de la asignación. Clave primaria de la tabla.
      Es un campo autoincremental que garantiza la unicidad de cada registro de asociación
      usuario-sucursal.
    is_active: true
  - name: merchant_user_id
    description: ID del usuario del sistema (merchant_user) que se asocia a una sucursal.
      Este campo es una clave foránea que referencia la tabla de usuarios. Representa
      la entidad a la que se le otorgan permisos de acceso.
    is_active: true
  - name: branch_id
    description: ID de la sucursal (branch) a la que el usuario tiene acceso. Este
      campo es una clave foránea que referencia la tabla de sucursales. Define el
      alcance operativo del usuario dentro de la organización.
    is_active: true
  - name: created_at
    description: 'Marca de tiempo que indica CUÁNDO se creó la asignación del usuario
      a la sucursal. FUENTE DE VERDAD para auditoría y trazabilidad de permisos. Formato:
      ''YYYY-MM-DD HH:MM:SS''.'
    is_active: true
  - name: is_active_assignment
    description: 'COLUMNA VIRTUAL (SQL lógico). Indica si la asignación usuario-sucursal
      está actualmente vigente. Se deriva de la lógica de negocio que considera activas
      las asignaciones creadas en los últimos 30 días o según otros flags en tablas
      relacionadas. Fórmula implícita: `CASE WHEN DATEDIFF(day, created_at, GETDATE())
      <= 30 THEN ''Activa'' ELSE ''Inactiva'' END` o similar basado en reglas del
      sistema.'
    is_active: true
- name: purchase
  friendly_name: Compras
  description: Tabla maestra de compras o ventas realizadas en el sistema. Contiene
    información sobre transacciones completadas, en progreso o anuladas, incluyendo
    montos financiados, cuotas iniciales y estado de pago. Esta tabla es la FUENTE
    DE VERDAD para las métricas de venta total y monto financiado.
  columns:
  - name: id
    description: ID numérico interno de la compra.
    is_active: true
  - name: uuid
    description: 'Identificador único universal (UUID) de la compra. Se utiliza como
      clave de relación con otras tablas (ej: purchase_payment).'
    is_active: true
  - name: status
    description: 'Estado de la compra según reglas de negocio. Valores permitidos:
      0=Progreso, 1=Completado, 2=Anulado.'
    is_active: true
  - name: transaction_id
    description: 'Identificador único legible de la transacción, generado para referencia
      comercial (ej: ''291C-20251103-01'').'
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro de la compra.
    is_active: true
  - name: total
    description: Monto total facturado de la compra. Es la FUENTE DE VERDAD para la
      medida 'total_billed' (Monto Venta Total). Incluye principal, intereses y cuota
      inicial.
    is_active: true
  - name: initial_fee
    description: Monto de la cuota inicial pagada al momento de la compra.
    is_active: true
  - name: subtotal
    description: Monto base de la compra antes de impuestos.
    is_active: true
  - name: iva
    description: Porcentaje de IVA aplicado a la compra.
    is_active: true
  - name: users_id
    description: UUID del cliente (usuario) que realizó la compra.
    is_active: true
  - name: merchant_id
    description: UUID del comercio donde se realizó la compra.
    is_active: true
  - name: merchant_branches_id
    description: UUID de la sucursal específica del comercio.
    is_active: true
  - name: merchant_user_id
    description: UUID del usuario del sistema (vendedor/empleado) que atendió la compra.
    is_active: true
  - name: purchase_intent_id
    description: UUID de la intención de compra que originó esta transacción.
    is_active: true
  - name: modality
    description: 'Modalidad de la compra (ej: ''store'' para tienda física).'
    is_active: true
  - name: invoice
    description: Ruta o referencia al archivo de la factura asociada.
    is_active: true
  - name: invoice_num
    description: Número de factura asignado a la compra.
    is_active: true
  - name: observation
    description: Notas u observaciones adicionales sobre la compra.
    is_active: true
  - name: updated_at
    description: Fecha y hora de la última actualización del registro.
    is_active: true
  - name: total_billed
    description: 'COLUMNA VIRTUAL - Medida: Monto Venta Total. Se deriva directamente
      de la columna ''total''. Representa el monto total facturado (Principal + Intereses
      + Inicial). Esta es la FUENTE DE VERDAD para esta métrica.'
    is_active: true
  - name: financed_amount
    description: 'COLUMNA VIRTUAL - Medida: Monto Financiado (Deuda neta inicial).
      Se calcula con la fórmula SQL: `purchase.total - purchase.initial_fee`. Representa
      la porción del total que se financia.'
    is_active: true
  - name: is_overdue
    description: 'COLUMNA VIRTUAL - Dimensión: Indica si la compra tiene cuotas vencidas.
      Lógica SQL: `EXISTS (SELECT 1 FROM purchase_payment pp WHERE pp.purchase_id
      = purchase.uuid AND pp.type = ''quote'' AND pp.status != 1 AND pp.valid_until_time
      < UNIX_TIMESTAMP(NOW()))`. Devuelve verdadero si existe al menos un pago de
      tipo ''cuota'' con estado diferente a 1 (¿Pagado?) y cuya fecha límite haya
      pasado.'
    is_active: true
- name: purchase_intent
  friendly_name: Intenciones de Compra
  description: Tabla que registra las solicitudes de financiamiento de compras realizadas
    por usuarios. Contiene el estado del proceso, el monto solicitado, información
    de las partes involucradas (comercio, sucursal, vendedor, usuario) y los detalles
    del plan de pago estructurado. Es la FUENTE DE VERDAD para las métricas de monto
    solicitado en intenciones de compra.
  columns:
  - name: id
    description: Identificador único numérico de la intención de compra.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) de la intención de compra.
    is_active: true
  - name: merchant_id
    description: UUID del comercio donde se originó la intención de compra.
    is_active: true
  - name: merchant_branches_id
    description: UUID de la sucursal específica del comercio.
    is_active: true
  - name: merchant_users_id
    description: UUID del usuario administrador del comercio que gestionó la solicitud.
    is_active: true
  - name: users_id
    description: UUID del cliente/usuario final que solicitó el financiamiento.
    is_active: true
  - name: merchant_seller_id
    description: UUID del vendedor asignado (si aplica). Valor 'None' indica que no
      hay vendedor asignado.
    is_active: true
  - name: plan
    description: Estructura JSON que detalla el plan de pagos acordado. Incluye cuota
      inicial, monto financiado, número de cuotas, valor de cada cuota y calendario
      de pagos con fechas y timestamps.
    is_active: true
  - name: status
    description: 'Estado actual de la intención de compra. REGLA DE NEGOCIO: Valores
      permitidos: 0=Pendiente, 1=Aprobado, 2=Rechazado.'
    is_active: true
  - name: total
    description: 'Monto total solicitado en la intención de compra. REGLA DE NEGOCIO:
      Esta columna es la base para la medida ''amount_requested''. Es la FUENTE DE
      VERDAD para el monto solicitado.'
    is_active: true
  - name: amount_requested
    description: MEDIDA (VIRTUAL). Representa el monto total solicitado. Se deriva
      directamente de la columna 'total'. Es la FUENTE DE VERDAD para análisis de
      montos solicitados.
    is_active: true
  - name: delete_reason
    description: Motivo por el cual la intención de compra fue eliminada/cancelada.
    is_active: true
  - name: deleted_by
    description: UUID del usuario (merchant_users_id) que eliminó la intención de
      compra. Valor 'None' si no ha sido eliminada.
    is_active: true
  - name: modality
    description: 'Modalidad en la que se realizó la solicitud (ej: ''store'' para
      tienda física).'
    is_active: true
  - name: cart
    description: Información del carrito de compras asociado (si aplica). Valor 'None'
      si no hay carrito.
    is_active: true
  - name: rate
    description: Tasa de interés aplicada al financiamiento.
    is_active: true
  - name: expire
    description: Indicador o timestamp de expiración de la solicitud. '0' puede indicar
      que no ha expirado.
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro. DIMENSIÓN de tiempo para análisis.
    is_active: true
  - name: updated_at
    description: Fecha y hora de la última actualización del registro.
    is_active: true
  - name: deleted_at
    description: Fecha y hora de eliminación del registro. Valor 'None' si el registro
      está activo.
    is_active: true
- name: purchase_payment
  friendly_name: Pagos de Compras
  description: Tabla que registra los pagos asociados a compras, incluyendo cuotas
    y pagos iniciales. Contiene el estado, monto adeudado, monto pagado y fechas de
    vencimiento de cada pago. Permite el seguimiento del ciclo de pago de una compra.
  columns:
  - name: id
    description: Identificador único del registro de pago.
    is_active: true
  - name: uuid
    description: Identificador único universal (UUID) del pago.
    is_active: true
  - name: purchase_id
    description: Identificador de la compra a la que pertenece este pago.
    is_active: true
  - name: status
    description: 'Estado del pago. Reglas de negocio: 0=Pendiente, 1=Pagado, 2=Anulado,
      5=Parcial. Valores permitidos: [''0'', ''1'', ''2'', ''5''].'
    is_active: true
  - name: amount
    description: Monto total adeudado para este pago. Es la FUENTE DE VERDAD para
      la medida 'amount_due'.
    is_active: true
  - name: amount_payed
    description: Monto que ya ha sido pagado para este registro. Es la FUENTE DE VERDAD
      para la medida 'amount_paid'.
    is_active: true
  - name: valid_until
    description: 'Fecha de vencimiento del pago en formato legible (ej: ''03 Nov'').'
    is_active: true
  - name: valid_until_time
    description: Fecha de vencimiento del pago en formato timestamp Unix.
    is_active: true
  - name: due_date
    description: 'COLUMNA VIRTUAL. Fecha de vencimiento del pago en formato datetime,
      derivada de ''valid_until_time''. Lógica SQL: FROM_UNIXTIME(valid_until_time).'
    is_active: true
  - name: payment_method
    description: Método de pago utilizado.
    is_active: true
  - name: details
    description: Detalles adicionales sobre el pago.
    is_active: true
  - name: paid_on
    description: Fecha en la que se realizó el pago.
    is_active: true
  - name: type
    description: 'Tipo de pago. Reglas de negocio: Valores permitidos: [''quote''
      (cuota), ''initial_fee'' (pago inicial)]. NOTA: En los datos reales se observa
      el valor ''initial'', que debe mapearse a ''initial_fee'' para cumplir con la
      definición semántica.'
    is_active: true
  - name: difference
    description: Diferencia entre el monto adeudado y el pagado.
    is_active: true
  - name: diff_type
    description: Tipo de diferencia calculada.
    is_active: true
  - name: merchant_id
    description: Identificador del comercio asociado.
    is_active: true
  - name: merchant_branches_id
    description: Identificador de la sucursal del comercio.
    is_active: true
  - name: users_id
    description: Identificador del usuario.
    is_active: true
  - name: sanctioned
    description: Indica si el pago ha sido sancionado.
    is_active: true
  - name: merchant_user_id
    description: Identificador del usuario del comercio.
    is_active: true
  - name: last_sms
    description: Registro del último SMS enviado relacionado con este pago.
    is_active: true
  - name: last_mail
    description: Registro del último correo electrónico enviado relacionado con este
      pago.
    is_active: true
  - name: sanctioned_with_partial_payment
    description: Indica si fue sancionado con un pago parcial.
    is_active: true
  - name: partial_payment_sanctioned
    description: Monto sancionado en caso de pago parcial.
    is_active: true
  - name: created_at
    description: Fecha y hora de creación del registro.
    is_active: true
  - name: updated_at
    description: Fecha y hora de la última actualización del registro.
    is_active: true
  - name: deleted_at
    description: Fecha y hora de eliminación (soft delete) del registro.
    is_active: true
- name: payment_checked
  friendly_name: Pagos Verificados
  description: Tabla que contiene los pagos verificados por el sistema, con información
    sobre el método de pago, referencia, banco, montos en moneda local (VES) y USD,
    y tasas de cambio aplicadas. Esta tabla es la FUENTE DE VERDAD para los pagos
    confirmados en el sistema.
  columns:
  - name: method
    description: 'Método de pago utilizado. Columna física: ''type''. Valores permitidos
      definidos por negocio: [''mobile'', ''transfer'', ''c2p'', ''cash'']. NOTA:
      En los datos reales se observa el valor ''INT'' que no está en la lista permitida,
      lo que indica una discrepancia entre definición semántica y datos.'
    is_active: true
  - name: reference
    description: 'Referencia del pago. Columna física: ''reference''. En los datos
      reales se observa el valor ''Reportado por el comercio'' como referencia estándar.'
    is_active: true
  - name: bank_code
    description: 'Código del banco asociado al pago. Columna física: ''bank_code''.
      En los datos reales se observa ''None'' para los registros de muestra.'
    is_active: true
  - name: created_at
    description: 'Fecha y hora de creación del registro del pago verificado. Columna
      física: ''created_at''.'
    is_active: true
  - name: amount_ves
    description: 'Monto del pago en Moneda Local (VES). Columna física: ''amount''.
      Esta es la medida base para cálculos.'
    is_active: true
  - name: exchange_rate
    description: 'Tasa de cambio aplicada para la conversión a USD. Columna física:
      ''convertion_rate''.'
    is_active: true
  - name: amount_usd
    description: 'COLUMNA VIRTUAL - Monto calculado en USD. Fórmula SQL: payment_checked.amount
      / payment_checked.convertion_rate. Esta medida es derivada y depende de amount_ves
      y exchange_rate.'
    is_active: true
  - name: id
    description: Identificador único del registro en la tabla física.
    is_active: true
  - name: uuid
    description: Identificador único universal del pago verificado.
    is_active: true
  - name: purchase_id
    description: Identificador de la compra asociada al pago.
    is_active: true
  - name: merchant_id
    description: Identificador del comercio que recibió el pago.
    is_active: true
  - name: merchant_branches_id
    description: Identificador de la sucursal del comercio donde se realizó el pago.
    is_active: true
  - name: users_id
    description: Identificador del usuario que realizó o reportó el pago.
    is_active: true
  - name: date
    description: Fecha del pago en formato DD-MM-YYYY. Diferente de created_at que
      es la fecha de registro en el sistema.
    is_active: true
  - name: sanctioned_payment_received_by_merchant
    description: Indicador binario (0/1) que señala si el pago sancionado fue recibido
      por el comercio. Valor '0' en datos de muestra.
    is_active: true
- name: bank_payment_notifications
  friendly_name: Notificaciones Bancarias
  description: Tabla que registra las notificaciones de transacciones recibidas desde
    bancos. Contiene la información cruda de la referencia bancaria, datos del pagador,
    estado del procesamiento interno, marca temporal y el monto en Bolívares (VES)
    reportado por la entidad financiera. Esta tabla es la FUENTE DE VERDAD para los
    montos en moneda local (VES) reportados por los bancos.
  columns:
  - name: originating_bank_reference
    description: Referencia bancaria única proporcionada por la entidad financiera
      origen. Este es el identificador crudo de la transacción en el sistema del banco.
    is_active: true
  - name: payer_phone
    description: Número de teléfono asociado al pagador de la transacción, según lo
      reportado por el banco.
    is_active: true
  - name: status
    description: 'Estado interno de procesamiento de la notificación. Valores permitidos:
      ''received'' (Recibida) = La notificación ha sido recibida del banco y está
      pendiente de procesar; ''processed'' (Procesada) = La notificación ha sido procesada
      por el sistema interno.'
    is_active: true
  - name: created_at
    description: Marca temporal (timestamp) que indica la fecha y hora en que se registró
      la notificación en este sistema.
    is_active: true
  - name: amount_ves
    description: Monto de la transacción en Bolívares Soberanos (VES). Este campo
      representa la FUENTE DE VERDAD del monto en moneda local reportado directamente
      por el banco.
    is_active: true
  - name: bank_ref
    description: COLUMNA VIRTUAL / ALIAS. Es un alias directo para 'originating_bank_reference'.
      Representa la referencia bancaria según la definición de la capa semántica.
    is_active: true
  - name: sender_phone
    description: COLUMNA VIRTUAL / ALIAS. Es un alias directo para 'payer_phone'.
      Representa el teléfono del remitente/pagador según la definición de la capa
      semántica.
    is_active: true
